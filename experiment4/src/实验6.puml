@startuml
skinparam default {
  FontName 微软雅黑  ' Windows字体，Mac可改为 "Heiti TC" 或 Arial
  FontSize 9
  LineWidth 1
  FontColor #333333
}

' 包基础样式
skinparam package {
  BackgroundColor #f8f9fa
  BorderColor #2f4f4f
}

' 第一步：定义边界包（B）- 直接命名标注[Boundary]
' 预约交互边界包（预约挂号用例核心）
package "预约交互边界包 [Boundary]" {
  [用户预约界面]
  [代预约信息填写界面]
  [预约单打印界面]
  [预约取消界面（线上）]
  [预约提醒短信发送接口]
}

' 支付交互边界包
package "支付交互边界包 [Boundary]" {
  [支付宝支付对接接口]
  [挂号单打印界面]
  [退费对接接口]
  [老年患者免费校验界面]
}

' 用户与管理员交互边界包
package "用户与管理员交互边界包 [Boundary]" {
  [用户登录界面（手机号/微信）]
  [管理员出诊信息维护界面]
}

' 第二步：定义控制包（C）- 直接命名标注[Control]
' 预约业务控制包（预约挂号逻辑核心）
package "预约业务控制包 [Control]" {
  [预约资格校验控制类]
  [医生出诊查询控制类]
  [预约信息提交控制类]
  [代预约逻辑控制类]
  [预约取消逻辑控制类]
  [预约提醒触发控制类]
  [预约违规处理控制类]
}

' 支付业务控制包（支付挂号费逻辑核心）
package "支付业务控制包 [Control]" {
  [挂号费金额计算控制类]
  [支付宝支付对接控制类]
  [缴费状态同步控制类]
  [退费处理控制类]
}

'  第三步：定义实体包（E）- 直接命名标注[Entity]
' 用户与患者实体包
package "用户与患者实体包 [Entity]" {
  [用户实体]
  [患者实体]
}

' 预约相关实体包
package "预约相关实体包 [Entity]" {
  [预约记录实体]
  [出诊计划实体]
  [短信通知记录实体]
}

' 支付相关实体包
package "支付相关实体包 [Entity]" {
  [支付记录实体]
  [挂号单实体]
  [退费记录实体]
}

' 医院资源实体包
package "医院资源实体包 [Entity]" {
  [医院实体]
  [科室实体]
  [医生实体]
}

' 第四步：定义基础依赖关系
' 边界包 → 控制包（核心依赖链，外部请求传递给业务逻辑）
"预约交互边界包 [Boundary]" --> "预约业务控制包 [Control]"
"支付交互边界包 [Boundary]" --> "支付业务控制包 [Control]"
"用户与管理员交互边界包 [Boundary]" --> "预约业务控制包 [Control]"
"用户与管理员交互边界包 [Boundary]" --> "支付业务控制包 [Control]"

' 控制包 → 实体包（业务逻辑操作数据载体）
"预约业务控制包 [Control]" --> "用户与患者实体包 [Entity]"
"预约业务控制包 [Control]" --> "预约相关实体包 [Entity]"
"预约业务控制包 [Control]" --> "医院资源实体包 [Entity]"
"预约业务控制包 [Control]" --> "支付相关实体包 [Entity]"

"支付业务控制包 [Control]" --> "用户与患者实体包 [Entity]"
"支付业务控制包 [Control]" --> "预约相关实体包 [Entity]"
"支付业务控制包 [Control]" --> "支付相关实体包 [Entity]"

' 实体包间基础关联
"预约相关实体包 [Entity]" --> "医院资源实体包 [Entity]"
"预约相关实体包 [Entity]" --> "用户与患者实体包 [Entity]"
"支付相关实体包 [Entity]" --> "预约相关实体包 [Entity]"
@enduml