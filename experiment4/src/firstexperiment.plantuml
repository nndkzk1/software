@startuml 恒温水箱状态图
skinparam state {
    BackgroundColor #EFEFEF
    BorderColor #333333
}
left to right direction

[*] --> 系统启动
系统启动 --> 温度检测 : 启动完成

state 温度检测 {
    [*] --> 读取温度值
    读取温度值 --> 温度过低 : 温度<20°
    读取温度值 --> 温度检测 : 温度>=20°（循环检测）
}

温度过低 --> 水量检测 : 进入水量判断
state 水量检测 {
    [*] --> 检测水位传感器
    检测水位传感器 --> 无水 : 水位为0
    检测水位传感器 --> 有水 : 水位≥标准水位
}

' 无水处理逻辑
无水 --> 温度检测 : 不烧水，返回温度检测

' 有水加热逻辑
有水 --> 加热中 : 打开继电器电源
加热中 --> 温度检测 : 温度≥100°\n断开电源
加热中 --> 水箱烧坏 : 设备故障
加热中 --> 休眠状态 : 23:00整\n自动断开电源

' 休眠状态转换逻辑
休眠状态 --> 温度检测 : 07:00整\n退出休眠，恢复恒温过程

' 故障维修逻辑
水箱烧坏 --> 维修中 : 触发故障报警
维修中 --> 系统启动 : 维修完成，重启系统

' 系统关机逻辑
系统启动 --> [*] : 系统关机
@enduml