@startuml
' 预约挂号用例 - 纯控制类协作图
object "预约资格校验控制类" as C1
object "代预约逻辑控制类" as C2
object "医生出诊查询控制类" as C3
object "预约信息提交控制类" as C4
object "预约提醒触发控制类" as C5

' 仅保留字体配置
skinparam default {
  FontName 微软雅黑
  FontSize 9
}

' 基础消息传递格式：对象1 -- 对象2 : 序号. 消息内容
' 核心交互流程
C1 -- C2 : 1. 检测是否为代挂号，请求绑定用户与患者信息
C2 -- C2 : 2. 执行代预约信息绑定逻辑
C2 -- C1 : 3. 返回代预约绑定结果（成功/失败）
C1 -- C1 : 4. 校验用户信用等级 + 时间段内预约数量（≤5）
' 【分支说明：资格校验失败则终止流程；成功则继续以下步骤】
C1 -- C3 : 5. 传递医院/科室/时间，请求查询可预约医生
C3 -- C3 : 6. 过滤满员医生，生成可预约医生列表
C3 -- C1 : 7. 返回可预约医生列表
C1 -- C4 : 8. 传递选中医生信息，请求提交预约
C4 -- C4 : 9. 扣减目标医生剩余号源
C4 -- C4 : 10. 创建预约记录（关联用户/患者/医生）
C4 -- C1 : 11. 返回预约提交结果（成功/失败）
C4 -- C5 : 12. 预约成功，传递手机号+预约信息，请求触发短信提醒
C5 -- C5 : 13. 封装短信内容，触发短信发送接口
C5 -- C4 : 14. 返回短信提醒触发结果
@enduml